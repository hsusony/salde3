@echo off
chcp 65001 > nul
echo ========================================
echo  ุฅูุดุงุก ููู ุชูุตูุจ ูุญูู - ูุธุงู ุฅุฏุงุฑุฉ ุงููุจูุนุงุช
echo ========================================
echo.

echo [1/4] ุชูุธูู ุงููุดุฑูุน...
call flutter clean
echo.

echo [2/4] ุจูุงุก ุงูุชุทุจูู ูุน ุงูุญูุงูุฉ ุงููุงููุฉ...
echo      ๐ ุชูุนูู ุงูุชุดููุฑ (Obfuscation)
echo      ๐ ุฅุฒุงูุฉ ุฑููุฒ ุงูุชุตุญูุญ
echo      ๐ ุญูุงูุฉ ูู ูู ุงูุดููุฑุฉ
call flutter build windows --release --obfuscate --split-debug-info=debug_info
if %errorlevel% neq 0 (
    echo.
    echo โ ูุดู ูู ุจูุงุก ุงูุชุทุจูู!
    pause
    exit /b %errorlevel%
)
echo.

echo [3/4] ุญุฐู ูููุงุช ุงูุชุตุญูุญ ููุญูุงูุฉ...
if exist "debug_info" (
    rmdir /s /q "debug_info"
    echo โ ุชู ุญุฐู ูููุงุช ุงูุชุตุญูุญ
)
echo.

echo [4/4] ุงูุชุญูู ูู ูุฌูุฏ ูููุงุช ุงูุจูุงุก...
if not exist "build\windows\x64\runner\Release\sales_management_system.exe" (
    echo โ ูู ูุชู ุงูุนุซูุฑ ุนูู ููู ุงูุชุทุจูู!
    pause
    exit /b 1
)

echo.
echo โ ุชู ุจูุงุก ุงูุชุทุจูู ุงููุญูู ุจูุฌุงุญ!
echo.
echo ๐ ูููุงุช ุงูุชุทุจูู ููุฌูุฏุฉ ูู:
echo    build\windows\x64\runner\Release\
echo.
echo ๐ ุงูุญูุงูุฉ ุงููุทุจูุฉ:
echo    โ ุชุดููุฑ ุงูููุฏ ุงููุตุฏุฑู (Obfuscation)
echo    โ ุฅุฒุงูุฉ ูุนูููุงุช ุงูุชุตุญูุญ
echo    โ ุตุนูุจุฉ ูู ุงูุชุดููุฑ ุงูุนูุณู
echo    โ ุญูุงูุฉ ูู ุงุณุชุฎุฑุงุฌ ุงูุณูุฑุณ ููุฏ
echo.
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo ุงูุขู ููููู ุฅูุดุงุก ููู ุงูุชูุตูุจ:
echo.
echo 1. ุงูุชุญ ููู installer_script.iss ุจุงุณุชุฎุฏุงู Inno Setup
echo.
echo 2. ุงุถุบุท ุนูู Build ุฃู F9
echo.
echo 3. ุณูุชู ุฅูุดุงุก ููู ุงูุชูุตูุจ ุงููุญูู ูู ูุฌูุฏ installer_output
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo.

pause
