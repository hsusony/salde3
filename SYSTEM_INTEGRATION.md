# ๐ ุชูุงูู ุงูุฃูุธูุฉ - System Integration

## โ ุชู ุชุญุฏูุซ ุงููุธุงู ุจุงููุงูู ููุนูู ุจุดูู ูุชูุงูู ูุงุญุชุฑุงูู

ุชุงุฑูุฎ ุงูุชุญุฏูุซ: 4 ููููุจุฑ 2025

---

## ๐ ููุฎุต ุงูุชุญุฏูุซุงุช

ุชู ุฑุจุท ุฌููุน ุฃูุธูุฉ ุงูุจุฑูุงูุฌ ุจุงููุฎุฒูู ุจุญูุซ ุฃู ุนูููุฉ ูู ุงููุธุงู ุชุคุซุฑ ุชููุงุฆูุงู ุนูู ูููุงุช ุงููุฎุฒูู.

---

## ๐ ุงูุชูุงูู ุงููุงูู ุจูู ุงูุฃูุธูุฉ

### 1. ๐ ูุธุงู ุงููุจูุนุงุช โ ุงููุฎุฒูู

**ุนูุฏ ุฅูุดุงุก ูุงุชูุฑุฉ ุจูุน:**
- โ ูุชู ุทุฑุญ ุงููููุงุช ุงููุจุงุนุฉ ูู ุงููุฎุฒูู ุชููุงุฆูุงู
- โ ูุชู ุงูุชุญุฏูุซ ููู ููุชุฌ ูู ุงููุงุชูุฑุฉ
- โ ูุชู ุงูุทุฑุญ ูู ุงููุฎุฒู ุงูุงูุชุฑุงุถู (ูููู ุชุฎุตูุตู)

**ุงูููู:** `lib/providers/sales_provider.dart`

```dart
// ุนูุฏ ุฅุถุงูุฉ ุจูุน ุฌุฏูุฏ
for (var item in sale.items) {
  await _inventoryService.deductStockForSale(
    productId: item.productId,
    quantity: item.quantity.toDouble(),
    warehouseId: 1, // ุงููุฎุฒู ุงูุงูุชุฑุงุถู
  );
}
```

---

### 2. ๐ฆ ูุธุงู ุงููุดุชุฑูุงุช โ ุงููุฎุฒูู

**ุนูุฏ ุฅูุดุงุก ูุงุชูุฑุฉ ุดุฑุงุก:**
- โ ูุชู ุฅุถุงูุฉ ุงููููุงุช ุงููุดุชุฑุงุฉ ูููุฎุฒูู ุชููุงุฆูุงู
- โ ูุชู ุงูุชุญุฏูุซ ููู ููุชุฌ ูู ุงููุงุชูุฑุฉ
- โ ูุชู ุงูุฅุถุงูุฉ ูููุฎุฒู ุงูุงูุชุฑุงุถู

**ุงูููู:** `lib/providers/purchases_provider.dart`

```dart
// ุนูุฏ ุฅุถุงูุฉ ุดุฑุงุก ุฌุฏูุฏ
for (var item in purchase.items) {
  await _inventoryService.addStockForPurchase(
    productId: item.productId,
    quantity: item.quantity.toDouble(),
    warehouseId: 1,
  );
}
```

---

### 3. โฉ๏ธ ูุฑุชุฌุนุงุช ุงููุจูุนุงุช โ ุงููุฎุฒูู

**ุนูุฏ ุฅุฑุฌุงุน ูุงุชูุฑุฉ ุจูุน:**
- โ ูุชู ุฅุนุงุฏุฉ ุงููููุงุช ุงููุฑุชุฌุนุฉ ูููุฎุฒูู
- โ ูุชู ุงูุชุญุฏูุซ ุญุณุจ ุงููููุงุช ุงููุญุฏุฏุฉ ูู ุงููุฑุชุฌุน
- โ ุฑุณุงูุฉ ุชุฃููุฏ ุจุชุญุฏูุซ ุงููุฎุฒูู

**ุงูููู:** `lib/screens/sales_return_screen.dart`

```dart
// ุนูุฏ ูุนุงูุฌุฉ ูุฑุชุฌุน ุงูุจูุน
for (var item in sale.items) {
  final returnQty = _returnQuantities[item.productId] ?? 0;
  if (returnQty > 0) {
    await inventoryService.returnStockForSaleReturn(
      productId: item.productId,
      quantity: returnQty.toDouble(),
      warehouseId: 1,
    );
  }
}
```

---

### 4. โช๏ธ ูุฑุชุฌุนุงุช ุงููุดุชุฑูุงุช โ ุงููุฎุฒูู

**ุนูุฏ ุฅุฑุฌุงุน ูุงุชูุฑุฉ ุดุฑุงุก:**
- โ ูุชู ุทุฑุญ ุงููููุงุช ุงููุฑุชุฌุนุฉ ูู ุงููุฎุฒูู
- โ ูุชู ุงูุชุญุฏูุซ ุญุณุจ ุงููููุงุช ุงููุญุฏุฏุฉ ูู ุงููุฑุชุฌุน

**ุงูููู:** `lib/providers/purchases_provider.dart`

```dart
// ุนูุฏ ุฅุถุงูุฉ ูุฑุชุฌุน ุดุฑุงุก
for (var item in returnItem.items) {
  await _inventoryService.deductStockForPurchaseReturn(
    productId: item.productId,
    quantity: item.quantity.toDouble(),
    warehouseId: 1,
  );
}
```

---

### 5. ๐ ุฅุถุงูุฉ ููุชุฌ ุฌุฏูุฏ โ ุงููุฎุฒูู

**ุนูุฏ ุฅุถุงูุฉ ููุชุฌ ุฌุฏูุฏ:**
- โ ูุชู ุฅูุดุงุก ุณุฌู ูุฎุฒูู ุชููุงุฆู ุจูููุฉ 0
- โ ูุธูุฑ ุงูููุชุฌ ูุจุงุดุฑุฉ ูู ุตูุญุฉ "ุนุฑุถ ุงูููุงุฏ"
- โ ุฌุงูุฒ ูุนูููุงุช ุงูุฅุฏุฎุงู ูุงูุฅุฎุฑุงุฌ

**ุงูููู:** `lib/providers/products_provider.dart`

```dart
// ุนูุฏ ุฅุถุงูุฉ ููุชุฌ ุฌุฏูุฏ
final warehouses = await _inventoryService.getAllWarehouses();

if (warehouses.isNotEmpty) {
  await _inventoryService.addStockForPurchase(
    productId: id,
    quantity: 0,
    warehouseId: warehouses.first.id!,
  );
}
```

---

### 6. ๐ ุงูุชุญูููุงุช ุจูู ุงููุฎุงุฒู

**ูุธุงู ุงูุชุญูููุงุช ูุนูู ุจุดูู ุตุญูุญ:**
- โ ุทุฑุญ ุงููููุฉ ูู ุงููุฎุฒู ุงููุตุฏุฑ
- โ ุฅุถุงูุฉ ุงููููุฉ ูููุฎุฒู ุงููุฌูุฉ
- โ ุชุณุฌูู ุนูููุฉ ุงูุชุญููู

**ุงูููู:** `lib/services/inventory_service.dart`

```dart
case InventoryTransactionType.transfer:
  // ููู ุจูู ูุฎุงุฒู
  if (transaction.warehouseFromId != null && 
      transaction.warehouseToId != null &&
      transaction.productId != null) {
    // ุทุฑุญ ูู ุงููุฎุฒู ุงููุตุฏุฑ
    await _adjustStock(
      transaction.warehouseFromId!,
      transaction.productId!,
      -transaction.quantity,
    );
    // ุฅุถุงูุฉ ูููุฎุฒู ุงููุฌูุฉ
    await _adjustStock(
      transaction.warehouseToId!,
      transaction.productId!,
      transaction.quantity,
    );
  }
  break;
```

---

## ๐๏ธ ุงูุฏูุงู ุงูุฌุฏูุฏุฉ ุงููุถุงูุฉ

### ูู `InventoryService`:

1. **`deductStockForSale`** - ุทุฑุญ ุงููููุฉ ุนูุฏ ุงูุจูุน
2. **`addStockForPurchase`** - ุฅุถุงูุฉ ุงููููุฉ ุนูุฏ ุงูุดุฑุงุก
3. **`returnStockForSaleReturn`** - ุฅุฑุฌุงุน ุงููููุฉ ุนูุฏ ูุฑุชุฌุน ุงูุจูุน
4. **`deductStockForPurchaseReturn`** - ุทุฑุญ ุงููููุฉ ุนูุฏ ูุฑุชุฌุน ุงูุดุฑุงุก

---

## ๐ฏ ููููุฉ ุนูู ุงููุธุงู

### ูุซุงู ุนููู:

1. **ุฅุถุงูุฉ ููุชุฌ ุฌุฏูุฏ:**
   ```
   ููุชุฌ: "ูุงุจุชูุจ ุฏูู"
   โ ูุชู ุฅูุดุงุก ุณุฌู ูู warehouse_stock ุจูููุฉ 0
   โ ูุธูุฑ ูู ุตูุญุฉ "ุนุฑุถ ุงูููุงุฏ"
   ```

2. **ุฅุถุงูุฉ ูููุฉ ุนุจุฑ ุงูุดุฑุงุก:**
   ```
   ุดุฑุงุก: 10 ูุงุจุชูุจุงุช
   โ ุงููุฎุฒูู = 0 + 10 = 10 ูุทุน
   ```

3. **ุจูุน ููุชุฌ:**
   ```
   ุจูุน: 3 ูุงุจุชูุจุงุช
   โ ุงููุฎุฒูู = 10 - 3 = 7 ูุทุน
   ```

4. **ูุฑุชุฌุน ุจูุน:**
   ```
   ูุฑุชุฌุน: 1 ูุงุจุชูุจ
   โ ุงููุฎุฒูู = 7 + 1 = 8 ูุทุน
   ```

5. **ูุฑุชุฌุน ุดุฑุงุก:**
   ```
   ูุฑุชุฌุน ุดุฑุงุก: 2 ูุงุจุชูุจุงุช
   โ ุงููุฎุฒูู = 8 - 2 = 6 ูุทุน
   ```

6. **ุชุญููู ุจูู ูุฎุงุฒู:**
   ```
   ููู: 3 ูุงุจุชูุจุงุช ูู ูุฎุฒู A ุฅูู ูุฎุฒู B
   โ ูุฎุฒู A = 6 - 3 = 3 ูุทุน
   โ ูุฎุฒู B = 0 + 3 = 3 ูุทุน
   ```

---

## ๐ ุงูุชุญุฏูุซุงุช ุงููุทููุจุฉ ูุณุชูุจูุงู

- [ ] ุฑุจุท ุงููุจูุนุงุช ุจูุฎุฒู ูุญุฏุฏ (ุญุงููุงู ุชุณุชุฎุฏู ุงููุฎุฒู ุงูุงูุชุฑุงุถู)
- [ ] ุฅุถุงูุฉ ูุธุงู ุฅุดุนุงุฑุงุช ุนูุฏ ููุงุฐ ุงููุฎุฒูู
- [ ] ุชูุฑูุฑ ุดุงูู ูุญุฑูุฉ ุงููุฎุฒูู
- [ ] ุฑุจุท ูุธุงู POS ุจุงููุฎุฒูู ุจููุณ ุงูุทุฑููุฉ

---

## โ ุงูุงุฎุชุจุงุฑุงุช ุงููุทููุจุฉ

### ูุจู ุงูุจุฏุก ุจุงูุงุณุชุฎุฏุงูุ ูู ุจุงูุชุงูู:

1. **ุงุฎุชุจุงุฑ ุงูุจูุน:**
   - ุฃุถู ููุชุฌ ุฌุฏูุฏ
   - ุฃุถู ูููุฉ ูู ุนุจุฑ "ุฅุฏุฎุงู ูุฎุฒูู"
   - ูู ุจุจูุน ุจุนุถ ุงููููุฉ
   - ุชุญูู ูู ุงูุฎูุงุถ ุงููุฎุฒูู

2. **ุงุฎุชุจุงุฑ ุงูุดุฑุงุก:**
   - ุฃูุดุฆ ูุงุชูุฑุฉ ุดุฑุงุก
   - ุชุญูู ูู ุฒูุงุฏุฉ ุงููุฎุฒูู

3. **ุงุฎุชุจุงุฑ ุงููุฑุชุฌุนุงุช:**
   - ูู ุจุฅุฑุฌุงุน ูุงุชูุฑุฉ ุจูุน
   - ุชุญูู ูู ุนูุฏุฉ ุงููููุฉ ูููุฎุฒูู

4. **ุงุฎุชุจุงุฑ ุงูุชุญููู:**
   - ูู ุจููู ูููุฉ ุจูู ูุฎุฒููู
   - ุชุญูู ูู ุงูุชุญุฏูุซ ุงูุตุญูุญ

---

## ๐ ุงูุฎูุงุตุฉ

ุงููุธุงู ุงูุขู ูุนูู ุจุดูู **ูุชูุงูู ูุงุญุชุฑุงูู**:

โ ุงูุจูุน ูุทุฑุญ ูู ุงููุฎุฒูู
โ ุงูุดุฑุงุก ูุถูู ูููุฎุฒูู  
โ ูุฑุชุฌุน ุงูุจูุน ูุนูุฏ ูููุฎุฒูู
โ ูุฑุชุฌุน ุงูุดุฑุงุก ูุทุฑุญ ูู ุงููุฎุฒูู
โ ุงูููุชุฌุงุช ุงูุฌุฏูุฏุฉ ุชุธูุฑ ูุจุงุดุฑุฉ
โ ุงูุชุญูููุงุช ุจูู ุงููุฎุงุฒู ุชุนูู ุจุดูู ุตุญูุญ

**ุชู ุงูุชุทููุฑ ุจูุงุณุทุฉ:** GitHub Copilot  
**ุชุงุฑูุฎ:** 4 ููููุจุฑ 2025
