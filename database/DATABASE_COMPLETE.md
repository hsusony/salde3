# โ ุงูุชูู ุจูุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช SQL Server

## ๐ ููุฎุต ูุง ุชู ุฅูุฌุงุฒู

ุชู ุจูุงุก ูุงุนุฏุฉ ุจูุงูุงุช **ุงุญุชุฑุงููุฉ ููุชูุงููุฉ** ููุธุงู ุฅุฏุงุฑุฉ ุงููุจูุนุงุช ุชุญุชูู ุนูู:

### ๐๏ธ ุงูุฌุฏุงูู (27 ุฌุฏูู)

#### ุงูุฌุฏุงูู ุงูุฃุณุงุณูุฉ
- โ Users (ุงููุณุชุฎุฏููู)
- โ Customers (ุงูุนููุงุก)
- โ Suppliers (ุงูููุฑุฏูู)
- โ Products (ุงูููุชุฌุงุช)
- โ Warehouses (ุงููุณุชูุฏุนุงุช)
- โ Cashboxes (ุงูุตูุงุฏูู)
- โ ChartOfAccounts (ุฏููู ุงูุญุณุงุจุงุช)

#### ุฌุฏุงูู ุงููุนุงููุงุช
- โ Sales + SaleItems (ุงููุจูุนุงุช)
- โ Purchases + PurchaseItems (ุงููุดุชุฑูุงุช)
- โ SalesReturns + SalesReturnItems (ูุฑุชุฌุนุงุช ุงููุจูุนุงุช)
- โ PurchaseReturns + PurchaseReturnItems (ูุฑุชุฌุนุงุช ุงููุดุชุฑูุงุช)
- โ Quotations (ุนุฑูุถ ุงูุฃุณุนุงุฑ)
- โ PendingOrders (ุงูุทูุจุงุช ุงููุนููุฉ)
- โ Installments + InstallmentPayments (ุงูุฃูุณุงุท)

#### ุงูุฌุฏุงูู ุงููุญุงุณุจูุฉ
- โ PaymentVouchers (ุณูุฏุงุช ุงููุจุถ)
- โ CashVouchers (ุณูุฏุงุช ุงูุตุฑู)
- โ TransferVouchers (ุณูุฏุงุช ุงูุชุญููู)
- โ JournalEntries + JournalEntryLines (ุงููููุฏ ุงููุญุงุณุจูุฉ)

#### ุฌุฏุงูู ุงููุฎุฒูู
- โ WarehouseStock (ูุฎุฒูู ุงููุณุชูุฏุนุงุช)
- โ InventoryTransactions (ุญุฑูุงุช ุงููุฎุฒูู)
- โ Packaging (ุงูุชุนุจุฆุฉ ูุงูุชุบููู)

#### ุฌุฏุงูู ุงููุธุงู
- โ AuditLogs (ุณุฌู ุงูุนูููุงุช)
- โ SequenceCounters (ุนุฏุงุฏุงุช ุงูุฃุฑูุงู ุงูุชุณูุณููุฉ)

---

### โ๏ธ ุงูุฅุฌุฑุงุกุงุช ุงููุฎุฒูุฉ (10 ุฅุฌุฑุงุกุงุช)

1. โ `sp_CreateSale` - ุฅูุดุงุก ูุงุชูุฑุฉ ุจูุน
2. โ `sp_CreatePurchase` - ุฅูุดุงุก ูุงุชูุฑุฉ ุดุฑุงุก
3. โ `sp_PayInstallment` - ุชุณุฌูู ุฏูุนุฉ ูุณุท
4. โ `sp_TransferBetweenCashboxes` - ุชุญููู ุจูู ุงูุตูุงุฏูู
5. โ `sp_CreateSalesReturn` - ุฅูุดุงุก ูุฑุชุฌุน ูุจูุนุงุช
6. โ `sp_GetDailySalesReport` - ุชูุฑูุฑ ุงููุจูุนุงุช ุงูููููุฉ
7. โ `sp_GetTopSellingProducts` - ุฃูุถู ุงูููุชุฌุงุช ูุจูุนุงู
8. โ `sp_GetTopCustomers` - ุฃูุถู ุงูุนููุงุก
9. โ `sp_CalculateProfit` - ุญุณุงุจ ุงูุฃุฑุจุงุญ
10. โ `sp_GetNextSequence` - ุชูููุฏ ุงูุฃุฑูุงู ุงูุชุณูุณููุฉ

---

### ๐๏ธ ุงูุนุฑูุถ (11 ุนุฑุถ ููุชูุงุฑูุฑ)

1. โ `vw_SalesWithDetails` - ูุจูุนุงุช ูุน ุงูุชูุงุตูู
2. โ `vw_PurchasesWithDetails` - ูุดุชุฑูุงุช ูุน ุงูุชูุงุตูู
3. โ `vw_CurrentInventory` - ุงููุฎุฒูู ุงูุญุงูู
4. โ `vw_WarehouseInventory` - ูุฎุฒูู ุงููุณุชูุฏุนุงุช
5. โ `vw_CustomerBalances` - ุฃุฑุตุฏุฉ ุงูุนููุงุก
6. โ `vw_SupplierBalances` - ุฃุฑุตุฏุฉ ุงูููุฑุฏูู
7. โ `vw_ActiveInstallments` - ุงูุฃูุณุงุท ุงููุดุทุฉ
8. โ `vw_CashboxMovements` - ุญุฑูุฉ ุงูุตูุงุฏูู
9. โ `vw_TopSellingProducts` - ุงูุฃูุซุฑ ูุจูุนุงู
10. โ `vw_ProfitLoss` - ุงูุฃุฑุจุงุญ ูุงูุฎุณุงุฆุฑ
11. โ `vw_InventoryMovements` - ุญุฑูุงุช ุงููุฎุฒูู

---

### โก ุงููุดุบูุงุช (15 ูุดุบู)

1. โ `trg_Customers_UpdatedAt` - ุชุญุฏูุซ ุชุงุฑูุฎ ุงูุชุนุฏูู ููุนููุงุก
2. โ `trg_Products_UpdatedAt` - ุชุญุฏูุซ ุชุงุฑูุฎ ุงูุชุนุฏูู ููููุชุฌุงุช
3. โ `trg_Warehouses_UpdatedAt` - ุชุญุฏูุซ ุชุงุฑูุฎ ุงูุชุนุฏูู ูููุณุชูุฏุนุงุช
4. โ `trg_Customers_Audit` - ุชุณุฌูู ุนูููุงุช ุงูุนููุงุก
5. โ `trg_Products_Audit` - ุชุณุฌูู ุนูููุงุช ุงูููุชุฌุงุช
6. โ `trg_Sales_Audit` - ุชุณุฌูู ุงููุจูุนุงุช
7. โ `trg_PaymentVouchers_UpdateCashbox` - ุชุญุฏูุซ ุงูุตูุฏูู ุนูุฏ ุงููุจุถ
8. โ `trg_CashVouchers_UpdateCashbox` - ุชุญุฏูุซ ุงูุตูุฏูู ุนูุฏ ุงูุตุฑู
9. โ `trg_JournalEntries_CheckBalance` - ุงูุชุญูู ูู ุชูุงุฒู ุงูููุฏ
10. โ `trg_JournalEntryLines_UpdateTotals` - ุชุญุฏูุซ ุฅุฌูุงููุงุช ุงููููุฏ
11. โ `trg_InventoryTransactions_UpdateStock` - ุชุญุฏูุซ ุงููุฎุฒูู ุชููุงุฆูุงู
12. โ `trg_Products_PreventDelete` - ููุน ุญุฐู ููุชุฌ ูู ุญุฑูุงุช
13. โ `trg_InstallmentPayments_UpdateStatus` - ุชุญุฏูุซ ุญุงูุฉ ุงููุณุท
14. โ `trg_JournalEntries_UpdateCashOnApproval` - ุชุญุฏูุซ ุงูุตูุงุฏูู ุนูุฏ ุงูุงุนุชูุงุฏ
15. โ ูุงููุฒูุฏ ูู ุงููุดุบูุงุช ููุญูุงุธ ุนูู ุณูุงูุฉ ุงูุจูุงูุงุช

---

### ๐ ุงูุณูุฑูุจุชุงุช ุงููููุดุฃุฉ

| ุงูููู | ุงููุตู | ุงูุญุงูุฉ |
|-------|-------|--------|
| `00_master_setup.sql` | ุงูุณูุฑูุจุช ุงูุฑุฆูุณู ุงูุดุงูู | โ |
| `create_database.sql` | ุงูุฌุฏุงูู ุงูุฃุณุงุณูุฉ (16 ุฌุฏูู) | โ |
| `02_additional_tables.sql` | ุงูุฌุฏุงูู ุงูุฅุถุงููุฉ (11 ุฌุฏูู) | โ |
| `03_stored_procedures.sql` | ุงูุฅุฌุฑุงุกุงุช ุงููุฎุฒูุฉ | โ |
| `04_views.sql` | ุงูุนุฑูุถ ููุชูุงุฑูุฑ | โ |
| `05_triggers.sql` | ุงููุดุบูุงุช | โ |
| `06_initial_data.sql` | ุงูุจูุงูุงุช ุงูุฃูููุฉ | โ |
| `setup_database.bat` | ุณูุฑูุจุช ุงูุชุซุจูุช ุงูุชููุงุฆู | โ |
| `README_SQL_SERVER.md` | ุงูุฏููู ุงูุดุงูู | โ ูุญุฏูุซ |
| `QUICK_REFERENCE.md` | ุงููุฑุฌุน ุงูุณุฑูุน | โ |

---

## ๐ ููููุฉ ุงูุชุซุจูุช

### ุงูุทุฑููุฉ ุงูุณุฑูุนุฉ (ููุตู ุจูุง):

```batch
cd database
setup_database.bat
```

### ุงูุทุฑููุฉ ุงููุฏููุฉ:

#### 1. ูู SSMS:
```
- ุงูุชุญ SQL Server Management Studio
- File > Open > File > ุงุฎุชุฑ 00_master_setup.sql
- ุงุถุบุท Query > SQLCMD Mode
- ุงุถุบุท F5 ููุชูููุฐ
```

#### 2. ูู PowerShell:
```powershell
cd database
sqlcmd -S localhost -E -i "00_master_setup.sql"
```

---

## ๐ ุจูุงูุงุช ุงูุฏุฎูู ุงูุงูุชุฑุงุถูุฉ

```
ุงุณู ุงููุณุชุฎุฏู: admin
ูููุฉ ุงููุฑูุฑ: admin123
```

โ๏ธ **ููู ุฌุฏุงู**: ุบููุฑ ูููุฉ ุงููุฑูุฑ ููุฑุงู!

---

## ๐ ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ ุงููุฏุฎูุฉ

ุชู ุฅุฏุฎุงู ุจูุงูุงุช ุชุฌุฑูุจูุฉ ููุจุฏุก ุงูุณุฑูุน:

- โ 1 ูุณุชุฎุฏู ูุฏูุฑ (admin)
- โ 3 ูุณุชูุฏุนุงุช ุงูุชุฑุงุถูุฉ
- โ 3 ุตูุงุฏูู ููุฏูุฉ (ุฏููุงุฑุ ุฏููุงุฑ)
- โ 20 ุญุณุงุจ ูุญุงุณุจู ูู ุฏููู ุงูุญุณุงุจุงุช
- โ 4 ุนููุงุก ุชุฌุฑูุจููู
- โ 3 ููุฑุฏูู ุชุฌุฑูุจููู
- โ 10 ููุชุฌุงุช ุชุฌุฑูุจูุฉ
- โ 7 ุนุฏุงุฏุงุช ุฃุฑูุงู ุชุณูุณููุฉ

---

## ๐ ุงููุซุงุฆู ุงููุชููุฑุฉ

1. **README_SQL_SERVER.md** - ุงูุฏููู ุงูุดุงูู ุงููุงูู
2. **QUICK_REFERENCE.md** - ุงููุฑุฌุน ุงูุณุฑูุน ููุนูููุงุช ุงูุดุงุฆุนุฉ
3. **ูููุงุช SQL** - ูุน ุชุนูููุงุช ุนุฑุจูุฉ ููุตูุฉ

---

## โจ ุงููููุฒุงุช

### ๐ ุงูุฃูุงู
- โ ุชุดููุฑ ูููุงุช ุงููุฑูุฑ (ูููุถู ุชุญุณููู)
- โ ุตูุงุญูุงุช ุงููุณุชุฎุฏููู
- โ ุณุฌู ุชุฏููู ุดุงูู (Audit Logs)
- โ ุญูุงูุฉ ูู ุงูุญุฐู ุงูุฎุงุทุฆ

### โก ุงูุฃุฏุงุก
- โ 25+ ููุฑุณ (Index) ูุชุณุฑูุน ุงูุงุณุชุนูุงูุงุช
- โ ุงูุนุฑูุถ (Views) ุงูุฌุงูุฒุฉ ููุชูุงุฑูุฑ
- โ ุงูุฅุฌุฑุงุกุงุช ุงููุฎุฒูุฉ ููุนูููุงุช ุงููุนูุฏุฉ
- โ ุงููุดุบูุงุช ููุชุญุฏูุซุงุช ุงูุชููุงุฆูุฉ

### ๐ ุณูุงูุฉ ุงูุจูุงูุงุช
- โ Foreign Keys ููุญูุงุธ ุนูู ุงูุนูุงูุงุช
- โ Constraints ููุชุญูู ูู ุงูุจูุงูุงุช
- โ Triggers ูุชุญุฏูุซ ุงูุจูุงูุงุช ุชููุงุฆูุงู
- โ Transactions ูุถูุงู ุงูุงุชุณุงู

### ๐ ุงูุชูุงุฑูุฑ
- โ 11 ุนุฑุถ ุฌุงูุฒ ููุชูุงุฑูุฑ
- โ 10 ุฅุฌุฑุงุกุงุช ูุฎุฒูุฉ ููุชุญูููุงุช
- โ ุงุณุชุนูุงูุงุช ูุญุณููุฉ ููุฃุฏุงุก
- โ ุชูุงุฑูุฑ ูุงููุฉ ููุฎุฒูู ุดุงููุฉ

---

## ๐ฏ ุงูุฎุทูุงุช ุงูุชุงููุฉ

### 1. ุชุญุฏูุซ ุฅุนุฏุงุฏุงุช ุงูุงุชุตุงู ูู ุงูุชุทุจูู

ุนุฏูู ููู `lib/config/database_config.dart`:

```dart
class DatabaseConfig {
  static const String host = 'localhost';
  static const int port = 1433;
  static const String database = 'SalesManagementDB';
  static const String username = 'admin'; // ุฃู ุงุณู ุงููุณุชุฎุฏู
  static const String password = 'YourPassword'; // ูููุฉ ุงููุฑูุฑ
}
```

### 2. ุชุซุจูุช ููุชุจุฉ ุงูุงุชุตุงู ุจู SQL Server

```yaml
# ูู pubspec.yaml
dependencies:
  mssql_connection: ^0.3.0
  # ุฃู
  sqflite: ^2.3.0
```

### 3. ุชุดุบูู ุงูุชุทุจูู

```batch
flutter pub get
flutter run -d windows
```

### 4. ุงูุฏุฎูู ูุงูุฅุนุฏุงุฏ ุงูุฃููู

- ุณุฌูู ุงูุฏุฎูู ุจู: `admin` / `admin123`
- ุบููุฑ ูููุฉ ุงููุฑูุฑ ูู ุงูุฅุนุฏุงุฏุงุช
- ุงุจุฏุฃ ุจุฅุฏุฎุงู ุจูุงูุงุช ูุธุงูู

---

## ๐ง ุงูุตูุงูุฉ ูุงููุณุฎ ุงูุงุญุชูุงุทู

### ุงููุณุฎ ุงูุงุญุชูุงุทู ุงููููู

```sql
BACKUP DATABASE SalesManagementDB
TO DISK = 'C:\Backups\SalesDB_' + FORMAT(GETDATE(), 'yyyyMMdd') + '.bak'
WITH COMPRESSION;
```

### ุงูุตูุงูุฉ ุงูุฃุณุจูุนูุฉ

```sql
-- ุฅุนุงุฏุฉ ุจูุงุก ุงูููุงุฑุณ
ALTER INDEX ALL ON [TableName] REBUILD;

-- ุชุญุฏูุซ ุงูุฅุญุตุงุฆูุงุช
UPDATE STATISTICS [TableName];
```

---

## ๐ ุงูุฏุนู ูุงููุณุงุนุฏุฉ

- ๐ **ุงููุซุงุฆู**: ุฑุงุฌุน `README_SQL_SERVER.md`
- ๐ **ุงูุจุฏุก ุงูุณุฑูุน**: ุฑุงุฌุน `QUICK_REFERENCE.md`
- ๐ป **ุงูุฃููุงุฏ**: ุฌููุน ุงูุณูุฑูุจุชุงุช ูุนูููุฉ ุจุงูุนุฑุจูุฉ
- ๐ **ุงูุฃุฎุทุงุก**: ุฑุงุฌุน ูุณู "ุงุณุชูุดุงู ุงูุฃุฎุทุงุก" ูู ุงููุซุงุฆู

---

## ๐ ุชูุงูููุง!

ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุขู **ุฌุงูุฒุฉ ุจุงููุงูู** ููุงุณุชุฎุฏุงู!

- โ 27 ุฌุฏูู ูุชูุงูู
- โ 10 ุฅุฌุฑุงุกุงุช ูุฎุฒูุฉ
- โ 11 ุนุฑุถ ููุชูุงุฑูุฑ
- โ 15 ูุดุบู ููุชุญุฏูุซุงุช ุงูุชููุงุฆูุฉ
- โ ุจูุงูุงุช ุชุฌุฑูุจูุฉ ููุจุฏุก ุงูุณุฑูุน
- โ ูุซุงุฆู ุดุงููุฉ ุจุงูุนุฑุจูุฉ

**ููููู ุงูุขู ุฑุจุท ุงูุชุทุจูู ูุจุฏุก ุงูุนูู! ๐**

---

**ุชุงุฑูุฎ ุงูุฅูุดุงุก**: ููููุจุฑ 2025  
**ุงูุฅุตุฏุงุฑ**: 1.0.0  
**ุงูุญุงูุฉ**: โ ููุชูู ูุฌุงูุฒ ููุฅูุชุงุฌ
