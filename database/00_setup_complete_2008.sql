-- =============================================
-- Master Setup Script for SQL Server 2008
-- ุณูุฑุจุช ุงูุฅุนุฏุงุฏ ุงูุดุงูู ูู SQL Server 2008
-- Compatible with: SQL Server 2008, 2008 R2, 2012, 2014, 2016, 2017, 2019, 2022
-- =============================================

PRINT N'';
PRINT N'โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ';
PRINT N'๐ ุจุฏุก ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุจูุงูุงุช ูุธุงู ุฅุฏุงุฑุฉ ุงููุจูุนุงุช';
PRINT N'๐ Sales Management System Database Setup';
PRINT N'โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ';
PRINT N'';
PRINT N'๐ ูุธุงู ุงูุชุดุบูู: SQL Server 2008+';
PRINT N'๐ ุงูุชุงุฑูุฎ: ' + CONVERT(NVARCHAR(50), GETDATE(), 120);
PRINT N'';
GO

-- =============================================
-- ุงููุฑุญูุฉ 1: ุฅูุดุงุก ุงููุงุนุฏุฉ ูุงูุฌุฏุงูู ุงูุฃุณุงุณูุฉ
-- =============================================
PRINT N'โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ';
PRINT N'๐ ุงููุฑุญูุฉ 1: ุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุงูุฌุฏุงูู ุงูุฃุณุงุณูุฉ (16 ุฌุฏูู)';
PRINT N'โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ';
GO

:r create_database_2008.sql
GO

-- =============================================
-- ุงููุฑุญูุฉ 2: ุฅุถุงูุฉ ุงูุฌุฏุงูู ุงููุชูุฏูุฉ
-- =============================================
PRINT N'';
PRINT N'โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ';
PRINT N'๐ ุงููุฑุญูุฉ 2: ุฅุถุงูุฉ ุงูุฌุฏุงูู ุงููุชูุฏูุฉ (11 ุฌุฏูู)';
PRINT N'โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ';
GO

:r 02_additional_tables_2008.sql
GO

-- =============================================
-- ุงููุฑุญูุฉ 3: ุฅุฏุฎุงู ุงูุจูุงูุงุช ุงูุฃูููุฉ
-- =============================================
PRINT N'';
PRINT N'โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ';
PRINT N'๐ ุงููุฑุญูุฉ 3: ุฅุฏุฎุงู ุงูุจูุงูุงุช ุงูุฃูููุฉ';
PRINT N'โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ';
GO

:r 03_initial_data_2008.sql
GO

-- =============================================
-- ุงูุชุญูู ุงูููุงุฆู
-- =============================================
PRINT N'';
PRINT N'โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ';
PRINT N'๐ ุงูุชุญูู ูู ุงูุชูุงู ุงูุชุซุจูุช';
PRINT N'โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ';
GO

USE SalesManagementDB;
GO

DECLARE @tableCount INT;
SELECT @tableCount = COUNT(*) 
FROM sys.tables 
WHERE type = 'U' AND name NOT LIKE 'sys%';

PRINT N'';
PRINT N'๐ ุฅุญุตุงุฆูุงุช ุงูุชุซุจูุช:';
PRINT N'   โ ุนุฏุฏ ุงูุฌุฏุงูู ุงููููุดุฃุฉ: ' + CAST(@tableCount AS NVARCHAR(10));

-- ุนุฑุถ ูุงุฆูุฉ ุงูุฌุฏุงูู
PRINT N'';
PRINT N'๐ ูุงุฆูุฉ ุงูุฌุฏุงูู ุงููููุดุฃุฉ:';
SELECT 
    ROW_NUMBER() OVER (ORDER BY name) AS [#],
    name AS [ุงุณู ุงูุฌุฏูู],
    CASE 
        WHEN name = 'Users' THEN N'ุงููุณุชุฎุฏููู'
        WHEN name = 'Customers' THEN N'ุงูุนููุงุก'
        WHEN name = 'Suppliers' THEN N'ุงูููุฑุฏูู'
        WHEN name = 'Products' THEN N'ุงูููุชุฌุงุช'
        WHEN name = 'Sales' THEN N'ุงููุจูุนุงุช'
        WHEN name = 'SaleItems' THEN N'ุชูุงุตูู ุงููุจูุนุงุช'
        WHEN name = 'SalesReturns' THEN N'ูุฑุชุฌุนุงุช ุงููุจูุนุงุช'
        WHEN name = 'SalesReturnItems' THEN N'ุชูุงุตูู ุงููุฑุชุฌุนุงุช'
        WHEN name = 'Purchases' THEN N'ุงููุดุชุฑูุงุช'
        WHEN name = 'PurchaseItems' THEN N'ุชูุงุตูู ุงููุดุชุฑูุงุช'
        WHEN name = 'PurchaseReturns' THEN N'ูุฑุชุฌุนุงุช ุงููุดุชุฑูุงุช'
        WHEN name = 'PurchaseReturnItems' THEN N'ุชูุงุตูู ูุฑุชุฌุนุงุช ุงููุดุชุฑูุงุช'
        WHEN name = 'Installments' THEN N'ุงูุฃูุณุงุท'
        WHEN name = 'Warehouses' THEN N'ุงููุณุชูุฏุนุงุช'
        WHEN name = 'WarehouseStock' THEN N'ูุฎุฒูู ุงููุณุชูุฏุนุงุช'
        WHEN name = 'InventoryTransactions' THEN N'ุญุฑูุฉ ุงููุฎุฒูู'
        WHEN name = 'Cashboxes' THEN N'ุงูุตูุงุฏูู'
        WHEN name = 'CashVouchers' THEN N'ุณูุฏุงุช ุงููุจุถ'
        WHEN name = 'PaymentVouchers' THEN N'ุณูุฏุงุช ุงูุตุฑู'
        WHEN name = 'TransferVouchers' THEN N'ุณูุฏุงุช ุงูุชุญููู'
        WHEN name = 'JournalEntries' THEN N'ุงููููุฏ ุงููุญุงุณุจูุฉ'
        WHEN name = 'JournalEntryLines' THEN N'ุชูุงุตูู ุงููููุฏ'
        WHEN name = 'ChartOfAccounts' THEN N'ุฏููู ุงูุญุณุงุจุงุช'
        WHEN name = 'PendingOrders' THEN N'ุงูุทูุจูุงุช ุงููุนููุฉ'
        WHEN name = 'Quotations' THEN N'ุนุฑูุถ ุงูุฃุณุนุงุฑ'
        WHEN name = 'QuotationItems' THEN N'ุชูุงุตูู ุงูุนุฑูุถ'
        WHEN name = 'Packaging' THEN N'ุงูุชุนุจุฆุฉ ูุงูุชุบููู'
        WHEN name = 'AuditLogs' THEN N'ุณุฌู ุงูุชุฏููู'
        ELSE N'ุฌุฏูู ุขุฎุฑ'
    END AS [ุงููุตู]
FROM sys.tables 
WHERE type = 'U' AND name NOT LIKE 'sys%'
ORDER BY name;

-- ุนุฑุถ ุฅุญุตุงุฆูุงุช ุงูุจูุงูุงุช
PRINT N'';
PRINT N'๐ ุฅุญุตุงุฆูุงุช ุงูุจูุงูุงุช ุงูุฃูููุฉ:';
SELECT 
    N'ุงููุณุชุฎุฏููู' AS [ุงูุฌุฏูู], 
    COUNT(*) AS [ุนุฏุฏ ุงูุณุฌูุงุช]
FROM Users
UNION ALL
SELECT N'ุงูุนููุงุก', COUNT(*) FROM Customers
UNION ALL
SELECT N'ุงูููุฑุฏูู', COUNT(*) FROM Suppliers
UNION ALL
SELECT N'ุงูููุชุฌุงุช', COUNT(*) FROM Products
UNION ALL
SELECT N'ุงููุณุชูุฏุนุงุช', COUNT(*) FROM Warehouses
UNION ALL
SELECT N'ุงูุตูุงุฏูู', COUNT(*) FROM Cashboxes
UNION ALL
SELECT N'ุฏููู ุงูุญุณุงุจุงุช', COUNT(*) FROM ChartOfAccounts
UNION ALL
SELECT N'ูุฎุฒูู ุงููุณุชูุฏุนุงุช', COUNT(*) FROM WarehouseStock;

PRINT N'';
PRINT N'โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ';
PRINT N'โโโ ุงูุชูู ุงูุฅุนุฏุงุฏ ุจูุฌุงุญ! โโโ';
PRINT N'โโโ Setup Completed Successfully! โโโ';
PRINT N'โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ';
PRINT N'';
PRINT N'๐ ูุนูููุงุช ุงูุฏุฎูู ุงูุงูุชุฑุงุถูุฉ:';
PRINT N'   ๐ ุงุณู ุงููุณุชุฎุฏู: admin';
PRINT N'   ๐ ูููุฉ ุงููุฑูุฑ: admin123';
PRINT N'';
PRINT N'โ๏ธ  ุชุญุฐูุฑ ุฃููู:';
PRINT N'   ููุฑุฌู ุชุบููุฑ ูููุฉ ุงููุฑูุฑ ุงูุงูุชุฑุงุถูุฉ ููุฑุงู!';
PRINT N'';
PRINT N'๐ ูููุฒูุฏ ูู ุงููุนูููุงุช:';
PRINT N'   - ุงุทูุน ุนูู ููู: README_SQL_2008.md';
PRINT N'   - ุฑุงุฌุน ุงูุชูุซูู ูู ูุฌูุฏ: database/';
PRINT N'';
PRINT N'โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ';
GO
